<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<title>Hangul å­—æ¯ç·´ç¿’å™¨ - å¸¸ç”¨éŸ³ç¯€ç‰ˆ</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    :root {
      --bg: #05070a;
      --bg-soft: #10131a;
      --card: #161a22;
      --card-hover: #1f2430;
      --accent: #3da6ff;
      --accent-soft: rgba(61, 166, 255, 0.18);
      --accent-active: #ff6b9d;
      --border-subtle: #242a36;
      --text-main: #f5f7ff;
      --text-sub: #a5adc0;
      --text-dim: #6f778a;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.45);
      --gradient-bg: radial-gradient(circle at top, #141827 0, #05070a 52%, #000 100%);
      --panel-gradient: radial-gradient(circle at top left, rgba(61,166,255,0.16), transparent 55%);
    }

    [data-theme="light"] {
      --bg: #ffffff;
      --bg-soft: #f8f9fa;
      --card: #ffffff;
      --card-hover: #f0f4f8;
      --accent: #0066cc;
      --accent-soft: rgba(0, 102, 204, 0.08);
      --accent-active: #e91e63;
      --border-subtle: #e1e4e8;
      --text-main: #1a1a1a;
      --text-sub: #4a5568;
      --text-dim: #718096;
      --shadow-soft: 0 8px 24px rgba(0, 0, 0, 0.08);
      --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --panel-gradient: linear-gradient(135deg, rgba(102,126,234,0.05), transparent);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--gradient-bg);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      padding: 24px 16px 32px;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .app-shell {
      width: 100%;
      max-width: 1200px;
      background: var(--bg);
      border-radius: 32px;
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      padding: 32px;
      backdrop-filter: blur(26px);
      transition: all 0.3s ease;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 32px;
      flex-wrap: wrap;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    h1 {
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: -0.02em;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(135deg, var(--accent), #667eea);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), #667eea);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      box-shadow: 0 4px 12px var(--accent-soft);
    }

    .subtitle {
      font-size: 0.95rem;
      color: var(--text-sub);
      font-weight: 400;
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .theme-toggle {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: var(--card);
      color: var(--text-main);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .theme-toggle:hover {
      background: var(--card-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .theme-toggle:active {
      transform: translateY(0);
    }

    .status-pill {
      padding: 10px 16px;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: var(--card);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
      color: var(--text-dim);
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: #30d158;
      box-shadow: 0 0 10px rgba(48,209,88,0.7);
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    .status-pill span.strong {
      color: var(--text-main);
      font-weight: 600;
    }

    main {
      display: flex;
      flex-direction: column;
      gap: 24px;
      margin-top: 24px;
    }
    
    .panels-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      gap: 24px;
    }

    @media (max-width: 820px) {

      /* çœŸæ­£æ‰‹æ©Ÿç‰ˆå¸ƒå±€ï¼šæ›´ç·Šæ¹Šã€æ›´é©åˆ iPhone */
      .app-shell {
        max-width: 100%;
        padding: 12px 8px 18px;
      }

      .panels-row {
        grid-template-columns: 1fr;
        gap: 10px;
      }

      .panel {
        padding: 12px 8px 12px;
      }

      .panel-header {
        margin-bottom: 6px;
      }

      .letters-grid {
        grid-template-columns: repeat(auto-fill, minmax(64px, 1fr));
        gap: 4px;
        margin-top: 6px;
      }

      .letter-card {
        padding: 6px 4px;
        border-radius: 14px;
      }

      .letter-symbol {
        font-size: 1.7rem;
        line-height: 1;
        margin-bottom: 4px;
      }

      .card-meta {
        font-size: 0.55rem;
        margin-top: 0;
      }

      .controls-row {
        flex-direction: column;
        gap: 6px;
        margin-top: 8px;
      }

      .control-button {
        padding: 10px 12px;
        font-size: 0.9rem;
        border-radius: 12px;
      }

      h1 {
        font-size: 1.2rem;
      }
    }

    .panel {
      background: var(--panel-gradient), var(--bg-soft);
      border-radius: 24px;
      border: 1px solid var(--border-subtle);
      padding: 24px;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .panel:hover {
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--border-subtle);
    }

    .panel-title-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .panel-title {
      font-size: 1.25rem;
      font-weight: 700;
      letter-spacing: -0.01em;
      color: var(--text-main);
    }

    .panel-subtitle {
      font-size: 0.85rem;
      color: var(--text-sub);
    }

    .panel-badge {
      padding: 6px 12px;
      font-size: 0.75rem;
      border-radius: 8px;
      border: 1px solid var(--border-subtle);
      background: var(--accent-soft);
      color: var(--accent);
      font-weight: 600;
      white-space: nowrap;
    }

    .letters-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      gap: 12px;
      margin-top: 16px;
    }

    .letter-card {
      background: var(--card);
      border-radius: 16px;
      border: 2px solid var(--border-subtle);
      padding: 16px 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .letter-card:hover {
      background: var(--card-hover);
      border-color: var(--accent);
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }

    .letter-card:active {
      transform: translateY(-2px) scale(0.98);
    }

    .letter-card.active {
      background: var(--accent-soft);
      border-color: var(--accent-active);
      border-width: 3px;
      box-shadow: 0 0 20px var(--accent-active);
      animation: activeGlow 1.5s ease-in-out infinite;
    }

    @keyframes activeGlow {
      0%, 100% { box-shadow: 0 0 20px var(--accent-active); }
      50% { box-shadow: 0 0 30px var(--accent-active); }
    }

    .letter-card.disabled {
      opacity: 0.3;
      cursor: not-allowed;
      pointer-events: none;
    }

    .letter-symbol {
      font-size: 2.5rem;
      font-weight: 600;
      line-height: 1;
      color: var(--text-main);
    }

    .letter-combined {
      font-size: 1.5rem;
      color: var(--accent);
      font-weight: 700;
      margin-top: 4px;
    }

    .letter-meta {
      display: flex;
      flex-direction: column;
      gap: 4px;
      align-items: center;
      width: 100%;
    }

    .roman {
      font-size: 0.75rem;
      color: var(--text-sub);
      font-weight: 500;
      letter-spacing: 0.02em;
    }

    .tag {
      font-size: 0.65rem;
      padding: 3px 8px;
      border-radius: 6px;
      background: var(--accent-soft);
      color: var(--accent);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .controls-row {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .control-button {
      flex: 1;
      min-width: 140px;
      padding: 14px 20px;
      border-radius: 14px;
      border: 2px solid var(--border-subtle);
      background: var(--card);
      color: var(--text-main);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.25s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .control-button:hover {
      background: var(--card-hover);
      border-color: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.12);
    }

    .control-button:active {
      transform: translateY(0);
    }

    .control-button .icon {
      font-size: 1.2rem;
    }

    .hint {
      margin-top: 20px;
      padding: 16px;
      border-radius: 14px;
      background: var(--accent-soft);
      border: 1px solid var(--border-subtle);
      display: flex;
      align-items: flex-start;
      gap: 12px;
      font-size: 0.85rem;
      color: var(--text-sub);
      line-height: 1.6;
    }

    .hint-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.85rem;
      font-weight: bold;
      flex-shrink: 0;
    }

    footer {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 0.85rem;
      color: var(--text-dim);
    }

    footer strong {
      color: var(--text-sub);
      font-weight: 600;
    }

    .toast {
      position: fixed;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--card);
      border: 1px solid var(--border-subtle);
      border-radius: 16px;
      padding: 16px 24px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      gap: 12px;
      z-index: 1000;
      opacity: 0;
      transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(20px);
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .toast-icon {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: linear-gradient(135deg, #30d158, #34c759);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-weight: bold;
      flex-shrink: 0;
    }

    #toastMsg {
      color: var(--text-main);
      font-size: 0.9rem;
      font-weight: 500;
    }
  </style>
</head>
<body>
<div class="app-shell">
<header>
<div class="title-block">
<h1>
<div class="logo-icon">í•œ</div>
          Hangul å­—æ¯ç·´ç¿’å™¨
        </h1>
<div class="subtitle">éæ¿¾ç½•è¦‹çµ„åˆ,åªé¡¯ç¤ºç¾ä»£éŸ“æ–‡å¸¸ç”¨çš„éŸ³ç¯€</div>
</div>
<div class="header-controls">
<div class="status-pill" id="voiceStatus">
<div class="status-dot"></div>
<span>èªéŸ³:</span>
<span class="strong">è¼‰å…¥ä¸­â€¦</span>
</div>
<button aria-label="åˆ‡æ›ä¸»é¡Œ" class="theme-toggle" id="themeToggle" type="button">
<span id="themeIcon">â˜€ï¸</span>
</button>
</div>
</header>
<main>
<!-- ç¬¬ä¸€æ­¥:é¸æ“‡åˆè²(å­éŸ³) -->
<section aria-label="Hangul initial consonants" class="panel">
<div class="panel-header">
<div class="panel-title-group">
<div class="panel-title">â‘  åˆè² Initial Consonants (ììŒ)</div>
<div class="panel-subtitle">
<span id="consonantSubtitle">è«‹é¸æ“‡ä¸€å€‹å­éŸ³ä½œç‚ºé–‹é ­</span>
</div>
</div>

</div>
<div class="letters-grid" id="consonantGrid">
<!-- å‹•æ…‹æ’å…¥ -->
</div>

<div class="controls-row">
<button class="control-button" id="clearConsonantBtn" type="button">
<span class="icon">ğŸ”„</span>
            æ¸…é™¤å­éŸ³é–å®š
          </button>
<button class="control-button" id="testVoiceBtn" type="button">
<span class="icon">ğŸ”Š</span>
            æ¸¬è©¦ç™¼éŸ³ã€Œê°€ë‚˜ë‹¤â€¦ã€
          </button>
</div>
</section>
<!-- ç¬¬äºŒæ­¥:é¸æ“‡ä¸­è²(æ¯éŸ³) -->
<section aria-label="Hangul vowels" class="panel">
<div class="panel-header">
<div class="panel-title-group">
<div class="panel-title">â‘¡ ä¸­è² Vowels (ëª¨ìŒ)</div>
<div class="panel-subtitle">
<span id="vowelSubtitle">è«‹å…ˆé¸æ“‡åˆè²å­éŸ³</span>
</div>
</div>

</div>
<div class="letters-grid" id="vowelGrid">
<!-- å‹•æ…‹æ’å…¥ -->
</div>

<div class="controls-row">
<button class="control-button" id="clearVowelBtn" type="button">
<span class="icon">ğŸ”„</span>
            æ¸…é™¤æ¯éŸ³é–å®š
          </button>
</div>
</section>
<!-- ç¬¬ä¸‰æ­¥:é¸æ“‡çµ‚è² -->
<section aria-label="Hangul final consonants" class="panel">
<div class="panel-header">
<div class="panel-title-group">
<div class="panel-title">â‘¢ çµ‚è² Final Consonants (ë°›ì¹¨)</div>
<div class="panel-subtitle">
<span id="finalSubtitle">è«‹å…ˆé¸æ“‡åˆè²å’Œä¸­è²</span>
</div>
</div>

</div>
<div class="letters-grid" id="finalGrid">
<!-- å‹•æ…‹æ’å…¥ -->
</div>

<div class="controls-row">
<button class="control-button" id="clearFinalBtn" type="button">
<span class="icon">ğŸ”„</span>
            æ¸…é™¤çµ‚è²é–å®š
          </button>
<button class="control-button" id="clearAllBtn" type="button">
<span class="icon">âœ¨</span>
            å…¨éƒ¨é‡ç½®
          </button>
</div>
</section>
</main>

</div>
<div class="toast" id="toast">
<div class="toast-icon">âœ“</div>
<div id="toastMsg">è¨Šæ¯</div>
</div>
<script>
    // ====== ä¸»é¡Œåˆ‡æ› ======
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const html = document.documentElement;

    const savedTheme = localStorage.getItem('theme') || 'dark';
    html.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);

    themeToggle.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon(newTheme);
      showToast(`å·²åˆ‡æ›è‡³${newTheme === 'dark' ? 'æ·±è‰²' : 'æ·ºè‰²'}æ¨¡å¼`);
    });

    function updateThemeIcon(theme) {
      themeIcon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    }

    // ====== è³‡æ–™å®šç¾© ======
    const vowels = [
      // åŸºæœ¬æ¯éŸ³
      { symbol: "ã…", display: "ã…", speak: "ì•„", roman: "a", group: "Basic", unicode: 0x1161 },
      { symbol: "ã…‘", display: "ã…‘", speak: "ì•¼", roman: "ya", group: "Basic", unicode: 0x1163 },
      { symbol: "ã…“", display: "ã…“", speak: "ì–´", roman: "eo", group: "Basic", unicode: 0x1165 },
      { symbol: "ã…•", display: "ã…•", speak: "ì—¬", roman: "yeo", group: "Basic", unicode: 0x1167 },
      { symbol: "ã…—", display: "ã…—", speak: "ì˜¤", roman: "o", group: "Basic", unicode: 0x1169 },
      { symbol: "ã…›", display: "ã…›", speak: "ìš”", roman: "yo", group: "Basic", unicode: 0x116D },
      { symbol: "ã…œ", display: "ã…œ", speak: "ìš°", roman: "u", group: "Basic", unicode: 0x116E },
      { symbol: "ã… ", display: "ã… ", speak: "ìœ ", roman: "yu", group: "Basic", unicode: 0x1172 },
      { symbol: "ã…¡", display: "ã…¡", speak: "ìœ¼", roman: "eu", group: "Basic", unicode: 0x1173 },
      { symbol: "ã…£", display: "ã…£", speak: "ì´", roman: "i", group: "Basic", unicode: 0x1175 },

      // è¤‡åˆæ¯éŸ³
      { symbol: "ã…", display: "ã…", speak: "ì• ", roman: "ae", group: "Compound", unicode: 0x1162 },
      { symbol: "ã…’", display: "ã…’", speak: "ì–˜", roman: "yae", group: "Compound", unicode: 0x1164 },
      { symbol: "ã…”", display: "ã…”", speak: "ì—", roman: "e", group: "Compound", unicode: 0x1166 },
      { symbol: "ã…–", display: "ã…–", speak: "ì˜ˆ", roman: "ye", group: "Compound", unicode: 0x1168 },
      { symbol: "ã…˜", display: "ã…˜", speak: "ì™€", roman: "wa", group: "Compound", unicode: 0x116A },
      { symbol: "ã…™", display: "ã…™", speak: "ì™œ", roman: "wae", group: "Compound", unicode: 0x116B },
      { symbol: "ã…š", display: "ã…š", speak: "ì™¸", roman: "oe", group: "Compound", unicode: 0x116C },
      { symbol: "ã…", display: "ã…", speak: "ì›Œ", roman: "wo", group: "Compound", unicode: 0x116F },
      { symbol: "ã…", display: "ã…", speak: "ì›¨", roman: "we", group: "Compound", unicode: 0x1170 },
      { symbol: "ã…Ÿ", display: "ã…Ÿ", speak: "ìœ„", roman: "wi", group: "Compound", unicode: 0x1171 },
      { symbol: "ã…¢", display: "ã…¢", speak: "ì˜", roman: "ui", group: "Compound", unicode: 0x1174 }
    ];

    const consonants = [
      // åŸºæœ¬å­éŸ³
      { symbol: "ã„±", speak: "ê°€", roman: "g/k", type: "Basic", unicode: 0x1100 },
      { symbol: "ã„´", speak: "ë‚˜", roman: "n", type: "Basic", unicode: 0x1102 },
      { symbol: "ã„·", speak: "ë‹¤", roman: "d/t", type: "Basic", unicode: 0x1103 },
      { symbol: "ã„¹", speak: "ë¼", roman: "r/l", type: "Basic", unicode: 0x1105 },
      { symbol: "ã…", speak: "ë§ˆ", roman: "m", type: "Basic", unicode: 0x1106 },
      { symbol: "ã…‚", speak: "ë°”", roman: "b/p", type: "Basic", unicode: 0x1107 },
      { symbol: "ã……", speak: "ì‚¬", roman: "s", type: "Basic", unicode: 0x1109 },
      { symbol: "ã…‡", speak: "ì•„", roman: "ng / silent", type: "Basic", unicode: 0x110B },
      { symbol: "ã…ˆ", speak: "ì", roman: "j", type: "Basic", unicode: 0x110C },
      { symbol: "ã…Š", speak: "ì°¨", roman: "ch", type: "Basic", unicode: 0x110E },
      { symbol: "ã…‹", speak: "ì¹´", roman: "k", type: "Basic", unicode: 0x110F },
      { symbol: "ã…Œ", speak: "íƒ€", roman: "t", type: "Basic", unicode: 0x1110 },
      { symbol: "ã…", speak: "íŒŒ", roman: "p", type: "Basic", unicode: 0x1111 },
      { symbol: "ã…", speak: "í•˜", roman: "h", type: "Basic", unicode: 0x1112 },

      // ç·ŠéŸ³
      { symbol: "ã„²", speak: "ê¹Œ", roman: "kk", type: "Tense", unicode: 0x1101 },
      { symbol: "ã„¸", speak: "ë”°", roman: "tt", type: "Tense", unicode: 0x1104 },
      { symbol: "ã…ƒ", speak: "ë¹ ", roman: "pp", type: "Tense", unicode: 0x1108 },
      { symbol: "ã…†", speak: "ì‹¸", roman: "ss", type: "Tense", unicode: 0x110A },
      { symbol: "ã…‰", speak: "ì§œ", roman: "jj", type: "Tense", unicode: 0x110D }
    ];

    // çµ‚è² (ë°›ì¹¨) - 27å€‹çµ‚è² + ç„¡çµ‚è²é¸é …
    const finals = [
      { symbol: "Ã—", speak: "", roman: "none", type: "None", finalIndex: 0, display: "ç„¡" },
      { symbol: "ã„±", speak: "ã„±", roman: "k", type: "Basic", finalIndex: 1 },
      { symbol: "ã„²", speak: "ã„²", roman: "kk", type: "Double", finalIndex: 2 },
      { symbol: "ã„³", speak: "ã„³", roman: "ks", type: "Complex", finalIndex: 3 },
      { symbol: "ã„´", speak: "ã„´", roman: "n", type: "Basic", finalIndex: 4 },
      { symbol: "ã„µ", speak: "ã„µ", roman: "nj", type: "Complex", finalIndex: 5 },
      { symbol: "ã„¶", speak: "ã„¶", roman: "nh", type: "Complex", finalIndex: 6 },
      { symbol: "ã„·", speak: "ã„·", roman: "t", type: "Basic", finalIndex: 7 },
      { symbol: "ã„¹", speak: "ã„¹", roman: "l", type: "Basic", finalIndex: 8 },
      { symbol: "ã„º", speak: "ã„º", roman: "lg", type: "Complex", finalIndex: 9 },
      { symbol: "ã„»", speak: "ã„»", roman: "lm", type: "Complex", finalIndex: 10 },
      { symbol: "ã„¼", speak: "ã„¼", roman: "lb", type: "Complex", finalIndex: 11 },
      { symbol: "ã„½", speak: "ã„½", roman: "ls", type: "Complex", finalIndex: 12 },
      { symbol: "ã„¾", speak: "ã„¾", roman: "lt", type: "Complex", finalIndex: 13 },
      { symbol: "ã„¿", speak: "ã„¿", roman: "lp", type: "Complex", finalIndex: 14 },
      { symbol: "ã…€", speak: "ã…€", roman: "lh", type: "Complex", finalIndex: 15 },
      { symbol: "ã…", speak: "ã…", roman: "m", type: "Basic", finalIndex: 16 },
      { symbol: "ã…‚", speak: "ã…‚", roman: "p", type: "Basic", finalIndex: 17 },
      { symbol: "ã…„", speak: "ã…„", roman: "ps", type: "Complex", finalIndex: 18 },
      { symbol: "ã……", speak: "ã……", roman: "s", type: "Basic", finalIndex: 19 },
      { symbol: "ã…†", speak: "ã…†", roman: "ss", type: "Double", finalIndex: 20 },
      { symbol: "ã…‡", speak: "ã…‡", roman: "ng", type: "Basic", finalIndex: 21 },
      { symbol: "ã…ˆ", speak: "ã…ˆ", roman: "j", type: "Basic", finalIndex: 22 },
      { symbol: "ã…Š", speak: "ã…Š", roman: "ch", type: "Basic", finalIndex: 23 },
      { symbol: "ã…‹", speak: "ã…‹", roman: "k", type: "Basic", finalIndex: 24 },
      { symbol: "ã…Œ", speak: "ã…Œ", roman: "t", type: "Basic", finalIndex: 25 },
      { symbol: "ã…", speak: "ã…", roman: "p", type: "Basic", finalIndex: 26 },
      { symbol: "ã…", speak: "ã…", roman: "h", type: "Basic", finalIndex: 27 }
    ];

    // ====== éŸ“æ–‡çµ„åˆå‡½æ•¸ ======
    function composeHangul(consonant, vowel, final = null) {
      // éŸ“æ–‡éŸ³ç¯€çµ„åˆå…¬å¼: 0xAC00 + (åˆè² * 588) + (ä¸­è² * 28) + (çµ‚è²)
      
      const consonantIndex = consonant.unicode - 0x1100;
      const vowelIndex = vowel.unicode - 0x1161;
      const finalIndex = final ? final.finalIndex : 0; // ç„¡çµ‚è²æ™‚ç‚º 0
      
      // è¨ˆç®—çµ„åˆå­—ç¬¦
      const syllable = 0xAC00 + (consonantIndex * 588) + (vowelIndex * 28) + finalIndex;
      
      return String.fromCharCode(syllable);
    }

    // ====== å¸¸ç”¨éŸ“æ–‡éŸ³ç¯€é©—è­‰ ======
    // å»ºç«‹å¸¸ç”¨çµ‚è²çš„æ˜ å°„è¡¨
    // åŸºæ–¼ç¾ä»£éŸ“æ–‡å¯¦éš›ä½¿ç”¨æƒ…æ³,éæ¿¾æ‰æ¥µå°‘ä½¿ç”¨çš„è¤‡åˆçµ‚è²çµ„åˆ
    const commonFinalsByVowel = {
      // å°æ–¼å¤§éƒ¨åˆ†æ¯éŸ³,é€™äº›çµ‚è²æ˜¯å¸¸ç”¨çš„
      'common': [0, 1, 4, 7, 8, 16, 17, 19, 21, 22, 23, 24, 25, 26, 27], 
      // finalIndex: ç„¡, ã„±, ã„´, ã„·, ã„¹, ã…, ã…‚, ã……, ã…‡, ã…ˆ, ã…Š, ã…‹, ã…Œ, ã…, ã…
      
      // æŸäº›æ¯éŸ³çµ„åˆå¾ˆå°‘ä½¿ç”¨çµ‚è²
      'rare': [0], // åªæœ‰ç„¡çµ‚è²
    };

    // å®šç¾©å“ªäº›æ¯éŸ³çµ„åˆè¼ƒå°‘ä½¿ç”¨çµ‚è²
    const rareVowelSymbols = ['ã…’', 'ã…–', 'ã…˜', 'ã…™', 'ã…š', 'ã…', 'ã…', 'ã…Ÿ', 'ã…¢'];

    // æª¢æŸ¥çµ„åˆæ˜¯å¦ç‚ºå¸¸ç”¨çš„éŸ“æ–‡éŸ³ç¯€
    function isCommonHangulSyllable(consonant, vowel, final = null) {
      const syllableCode = composeHangul(consonant, vowel, final).charCodeAt(0);
      
      // é¦–å…ˆæª¢æŸ¥æ˜¯å¦åœ¨éŸ“æ–‡éŸ³ç¯€å€å¡Šç¯„åœå…§
      if (syllableCode < 0xAC00 || syllableCode > 0xD7A3) {
        return false;
      }

      const finalIndex = final ? final.finalIndex : 0;
      
      // æª¢æŸ¥æ˜¯å¦ç‚ºç½•è¦‹çš„æ¯éŸ³
      const isRareVowel = rareVowelSymbols.includes(vowel.symbol);
      
      if (isRareVowel) {
        // ç½•è¦‹æ¯éŸ³:åªå…è¨±ç„¡çµ‚è²æˆ–æ¥µå°‘æ•¸çµ‚è²
        return finalIndex === 0 || finalIndex === 1 || finalIndex === 4 || finalIndex === 21;
        // å…è¨±: ç„¡, ã„±, ã„´, ã…‡
      }
      
      // æª¢æŸ¥è¤‡åˆçµ‚è² - å¤§éƒ¨åˆ†è¤‡åˆçµ‚è²åœ¨ç¾ä»£éŸ“æ–‡ä¸­å¾ˆå°‘ä½¿ç”¨
      const complexFinals = [2, 3, 5, 6, 9, 10, 11, 12, 13, 14, 15, 18, 20];
      // ã„², ã„³, ã„µ, ã„¶, ã„º, ã„», ã„¼, ã„½, ã„¾, ã„¿, ã…€, ã…„, ã…†
      
      if (complexFinals.includes(finalIndex)) {
        // åªæœ‰æŸäº›åˆè²+ä¸­è²çµ„åˆæœƒä½¿ç”¨è¤‡åˆçµ‚è²
        // ç°¡åŒ–åˆ¤æ–·:å¤§éƒ¨åˆ†è¤‡åˆçµ‚è²åªèˆ‡åŸºæœ¬æ¯éŸ³ ã…, ã…“, ã…—, ã…œ, ã…¡, ã…£ çµ„åˆ
        const basicVowels = ['ã…', 'ã…“', 'ã…—', 'ã…œ', 'ã…¡', 'ã…£'];
        
        if (!basicVowels.includes(vowel.symbol)) {
          return false;
        }
        
        // é€²ä¸€æ­¥é™åˆ¶:åªæœ‰éƒ¨åˆ†è¤‡åˆçµ‚è²è¼ƒå¸¸ç”¨
        const moreCommonComplexFinals = [2, 20]; // ã„², ã…†
        if (!moreCommonComplexFinals.includes(finalIndex)) {
          // å…¶ä»–è¤‡åˆçµ‚è²åªåœ¨ç‰¹å®šæƒ…æ³ä¸‹ä½¿ç”¨
          // ç‚ºäº†ç°¡åŒ–,æˆ‘å€‘èªç‚ºå®ƒå€‘è¼ƒå°‘ä½¿ç”¨
          return finalIndex === 9 || finalIndex === 11; // ã„º, ã„¼ ç¨å¾®å¸¸è¦‹
        }
      }
      
      return true;
    }

    // ç²å–ç‰¹å®šåˆè²+ä¸­è²çµ„åˆä¸‹,æ‰€æœ‰å¯ç”¨çš„çµ‚è²
    function getAvailableFinals(consonant, vowel) {
      if (!consonant || !vowel) return finals;
      
      const availableFinals = [];
      
      finals.forEach(final => {
        if (isCommonHangulSyllable(consonant, vowel, final)) {
          availableFinals.push(final);
        }
      });
      
      return availableFinals;
    }

    // ç²å–ç‰¹å®šåˆè²ä¸‹,æ‰€æœ‰å¯ç”¨çš„ä¸­è²
    function getAvailableVowels(consonant) {
      if (!consonant) return vowels;
      
      // æ‰€æœ‰æ¯éŸ³éƒ½å¯ä»¥èˆ‡æ‰€æœ‰å­éŸ³çµ„åˆ
      // (åœ¨åŸºæœ¬çµ„åˆå±¤é¢,æ²’æœ‰é™åˆ¶)
      return vowels;
    }

    // ====== ç‹€æ…‹ç®¡ç† ======
    let selectedConsonant = null;
    let selectedVowel = null;
    let selectedFinal = null;

    // ====== TTSè™•ç† ======
    let koreanVoice = null;
    const statusEl = document.getElementById("voiceStatus");
    const toastEl = document.getElementById("toast");
    const toastMsgEl = document.getElementById("toastMsg");

    function showToast(msg, duration = 2600) {
      toastMsgEl.textContent = msg;
      toastEl.classList.add("show");
      setTimeout(() => {
        toastEl.classList.remove("show");
      }, duration);
    }

    function updateStatus(text, ok = true) {
      const spans = statusEl.querySelectorAll("span");
      // ç¬¬ä¸€å€‹spanæ˜¯"èªéŸ³:"ï¼Œç¬¬äºŒå€‹span.strongæ˜¯ç‹€æ…‹æ–‡å­—
      if (spans.length >= 2) {
        spans[1].textContent = text;
      }
      const dot = statusEl.querySelector(".status-dot");
      if (ok) {
        dot.style.background = "#30d158";
        dot.style.boxShadow = "0 0 10px rgba(48,209,88,0.7)";
      } else {
        dot.style.background = "#ff453a";
        dot.style.boxShadow = "0 0 10px rgba(255,69,58,0.7)";
      }
    }

    function initVoices() {
      const voices = window.speechSynthesis.getVoices();
      
      // å¦‚æœèªéŸ³åˆ—è¡¨é‚„æ²’è¼‰å…¥å®Œæˆï¼Œç­‰å¾…ä¸‹æ¬¡äº‹ä»¶
      if (!voices || voices.length === 0) {
        return;
      }

      koreanVoice =
        voices.find((v) => v.lang && v.lang.toLowerCase().startsWith("ko")) ||
        voices.find((v) => v.lang && v.lang.toLowerCase().includes("ko")) ||
        null;

      if (koreanVoice) {
        updateStatus(`${koreanVoice.name}`, true);
      } else {
        updateStatus("ç„¡éŸ“æ–‡èªéŸ³,ä½¿ç”¨é è¨­", false);
      }
    }

    if ("speechSynthesis" in window) {
      // å…ˆå˜—è©¦åˆå§‹åŒ–ä¸€æ¬¡
      initVoices();
      
      // è¨­ç½®èªéŸ³è®Šæ›´ç›£è½å™¨
      window.speechSynthesis.onvoiceschanged = initVoices;
      
      // å¦‚æœ1ç§’å¾Œé‚„æ²’è¼‰å…¥ï¼Œé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
      setTimeout(() => {
        if (!koreanVoice) {
          const voices = window.speechSynthesis.getVoices();
          if (voices && voices.length > 0) {
            updateStatus("ç„¡éŸ“æ–‡èªéŸ³,ä½¿ç”¨é è¨­", false);
          } else {
            updateStatus("èªéŸ³æœªè¼‰å…¥", false);
          }
        }
      }, 1000);
    } else {
      updateStatus("ä¸æ”¯æŒèªéŸ³åˆæˆ", false);
      showToast("æ­¤ç€è¦½å™¨ä¸æ”¯æŒ Speech Synthesis,ç™¼éŸ³åŠŸèƒ½å¯èƒ½ç„¡æ³•ä½¿ç”¨ã€‚");
    }

    function speakKorean(text) {
      if (!("speechSynthesis" in window)) {
        showToast("æ­¤ç€è¦½å™¨ä¸æ”¯æŒèªéŸ³åˆæˆã€‚");
        return;
      }
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = "ko-KR";
      if (koreanVoice) {
        utter.voice = koreanVoice;
      }
      utter.rate = 0.9;
      utter.pitch = 1.0;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utter);
    }

    // ====== ç•«é¢æ¸²æŸ“ ======
    function createVowelCard(vowel) {
      const card = document.createElement("button");
      card.type = "button";
      card.className = "letter-card";
      card.setAttribute("data-symbol", vowel.symbol);

      // æª¢æŸ¥é€™å€‹æ¯éŸ³æ˜¯å¦å¯ç”¨
      const isAvailable = !selectedConsonant || 
        vowels.some(v => v === vowel && getAvailableVowels(selectedConsonant).includes(vowel));

      if (!isAvailable) {
        card.classList.add("disabled");
      }

      const symbolEl = document.createElement("div");
      symbolEl.className = "letter-symbol";
      symbolEl.textContent = vowel.display || vowel.symbol;

      // å¦‚æœæœ‰é¸æ“‡å­éŸ³,é¡¯ç¤ºçµ„åˆå¾Œçš„å­—
      if (selectedConsonant && isAvailable) {
        const combinedEl = document.createElement("div");
        combinedEl.className = "letter-combined";
        const combined = composeHangul(selectedConsonant, vowel, selectedFinal);
        combinedEl.textContent = combined;
        card.appendChild(combinedEl);
      }

      const metaEl = document.createElement("div");
      metaEl.className = "letter-meta";

      if (vowel.roman) {
        const roman = document.createElement("span");
        roman.className = "roman";
        roman.textContent = vowel.roman;
        metaEl.appendChild(roman);
      }

card.appendChild(symbolEl);
      card.appendChild(metaEl);

      if (isAvailable) {
        card.addEventListener("click", () => {
          // åˆ‡æ›é¸æ“‡ç‹€æ…‹
          if (selectedVowel === vowel) {
            selectedVowel = null;
            card.classList.remove("active");
            showToast("å·²è§£é™¤æ¯éŸ³é–å®š");
          } else {
            // ç§»é™¤ä¹‹å‰çš„é¸æ“‡
            document.querySelectorAll("#vowelGrid .letter-card").forEach(c => {
              c.classList.remove("active");
            });
            
            selectedVowel = vowel;
            card.classList.add("active");
            
            if (selectedConsonant) {
              const combined = composeHangul(selectedConsonant, vowel, selectedFinal);
              showToast(`å·²é–å®šæ¯éŸ³: ${vowel.symbol} â†’ ${combined}`);
              speakKorean(combined);
            } else {
              showToast(`å·²é–å®šæ¯éŸ³: ${vowel.symbol} (${vowel.speak})`);
              speakKorean(vowel.speak);
            }
          }
          
          updateFinalGrid();
          updateVowelSubtitle();
        });
      }

      return card;
    }

    function createConsonantCard(consonant) {
      const card = document.createElement("button");
      card.type = "button";
      card.className = "letter-card";
      card.setAttribute("data-symbol", consonant.symbol);

      const symbolEl = document.createElement("div");
      symbolEl.className = "letter-symbol";
      symbolEl.textContent = consonant.symbol;

      const metaEl = document.createElement("div");
      metaEl.className = "letter-meta";

      if (consonant.roman) {
        const roman = document.createElement("span");
        roman.className = "roman";
        roman.textContent = consonant.roman;
        metaEl.appendChild(roman);
      }

card.appendChild(symbolEl);
      card.appendChild(metaEl);

      card.addEventListener("click", () => {
        // åˆ‡æ›é¸æ“‡ç‹€æ…‹
        if (selectedConsonant === consonant) {
          selectedConsonant = null;
          card.classList.remove("active");
          showToast("å·²è§£é™¤å­éŸ³é–å®š");
        } else {
          // ç§»é™¤ä¹‹å‰çš„é¸æ“‡
          document.querySelectorAll("#consonantGrid .letter-card").forEach(c => {
            c.classList.remove("active");
          });
          
          selectedConsonant = consonant;
          card.classList.add("active");
          showToast(`å·²é–å®šå­éŸ³: ${consonant.symbol} (${consonant.speak})`);
          speakKorean(consonant.speak);
        }
        
        updateVowelGrid();
        updateConsonantSubtitle();
      });

      return card;
    }

    function createFinalCard(final) {
      const card = document.createElement("button");
      card.type = "button";
      card.className = "letter-card";
      card.setAttribute("data-symbol", final.symbol);

      // æª¢æŸ¥é€™å€‹çµ‚è²æ˜¯å¦å¯ç”¨
      const isAvailable = !selectedConsonant || !selectedVowel || 
        isCommonHangulSyllable(selectedConsonant, selectedVowel, final);

      if (!isAvailable) {
        card.classList.add("disabled");
      }

      const symbolEl = document.createElement("div");
      symbolEl.className = "letter-symbol";
      symbolEl.textContent = final.display || final.symbol;

      // å¦‚æœæœ‰é¸æ“‡å­éŸ³å’Œæ¯éŸ³,é¡¯ç¤ºå®Œæ•´çµ„åˆ
      if (selectedConsonant && selectedVowel && isAvailable) {
        const combinedEl = document.createElement("div");
        combinedEl.className = "letter-combined";
        const combined = composeHangul(selectedConsonant, selectedVowel, final);
        combinedEl.textContent = combined;
        card.appendChild(combinedEl);
      }

      const metaEl = document.createElement("div");
      metaEl.className = "letter-meta";

      if (final.roman) {
        const roman = document.createElement("span");
        roman.className = "roman";
        roman.textContent = final.roman;
        metaEl.appendChild(roman);
      }

card.appendChild(symbolEl);
      card.appendChild(metaEl);

      if (isAvailable) {
        card.addEventListener("click", () => {
          // åˆ‡æ›é¸æ“‡ç‹€æ…‹
          if (selectedFinal === final) {
            selectedFinal = null;
            card.classList.remove("active");
            showToast("å·²è§£é™¤çµ‚è²é–å®š");
          } else {
            // ç§»é™¤ä¹‹å‰çš„é¸æ“‡
            document.querySelectorAll("#finalGrid .letter-card").forEach(c => {
              c.classList.remove("active");
            });
            
            selectedFinal = final;
            card.classList.add("active");
            
            if (selectedConsonant && selectedVowel) {
              const combined = composeHangul(selectedConsonant, selectedVowel, final);
              if (final.finalIndex === 0) {
                showToast(`å·²é¸æ“‡:ç„¡çµ‚è² â†’ ${combined}`);
              } else {
                showToast(`å·²é–å®šçµ‚è²: ${final.symbol} â†’ ${combined}`);
              }
              speakKorean(combined);
            } else {
              if (final.finalIndex === 0) {
                showToast("å·²é¸æ“‡:ç„¡çµ‚è²");
              } else {
                showToast(`å·²é–å®šçµ‚è²: ${final.symbol}`);
              }
            }
          }
          
          updateVowelGrid();
          updateFinalSubtitle();
        });
      }

      return card;
    }

    function renderConsonantGrid() {
      const consonantGrid = document.getElementById("consonantGrid");
      consonantGrid.innerHTML = "";

      consonants.forEach((c) => {
        consonantGrid.appendChild(createConsonantCard(c));
      });
    }

    function updateConsonantSubtitle() {
      const subtitle = document.getElementById("consonantSubtitle");
      
      if (selectedConsonant) {
        subtitle.textContent = `å·²é–å®šåˆè²ã€Œ${selectedConsonant.symbol}ã€,è«‹å¾€ä¸‹é¸æ“‡ä¸­è²æ¯éŸ³`;
      } else {
        subtitle.textContent = "è«‹é¸æ“‡ä¸€å€‹å­éŸ³ä½œç‚ºé–‹é ­";
      }
    }

    function renderVowelGrid() {
      const vowelGrid = document.getElementById("vowelGrid");
      vowelGrid.innerHTML = "";

      vowels.forEach((v) => {
        vowelGrid.appendChild(createVowelCard(v));
      });
    }

    function updateVowelGrid() {
      renderVowelGrid();
      updateVowelSubtitle();
    }

    function updateVowelSubtitle() {
      const subtitle = document.getElementById("vowelSubtitle");
      
      if (selectedConsonant) {
        if (selectedVowel) {
          const combined = composeHangul(selectedConsonant, selectedVowel, selectedFinal);
          if (selectedFinal) {
            if (selectedFinal.finalIndex === 0) {
              subtitle.textContent = `å·²çµ„åˆ:${selectedConsonant.symbol} + ${selectedVowel.symbol} = ${combined} (ç„¡çµ‚è²)`;
            } else {
              subtitle.textContent = `å·²çµ„åˆ:${selectedConsonant.symbol} + ${selectedVowel.symbol} + ${selectedFinal.symbol} = ${combined}`;
            }
          } else {
            subtitle.textContent = `å·²çµ„åˆ:${selectedConsonant.symbol} + ${selectedVowel.symbol} = ${combined}`;
          }
        } else {
          subtitle.textContent = `å·²é¸åˆè²ã€Œ${selectedConsonant.symbol}ã€,è«‹é¸æ“‡æ¯éŸ³é€²è¡Œçµ„åˆ`;
        }
      } else {
        subtitle.textContent = "è«‹å…ˆé¸æ“‡åˆè²å­éŸ³";
      }
    }

    function renderFinalGrid() {
      const finalGrid = document.getElementById("finalGrid");
      finalGrid.innerHTML = "";

      finals.forEach((f) => {
        finalGrid.appendChild(createFinalCard(f));
      });
    }

    function updateFinalGrid() {
      renderFinalGrid();
      updateFinalSubtitle();
    }

    function updateFinalSubtitle() {
      const subtitle = document.getElementById("finalSubtitle");
      
      if (selectedConsonant && selectedVowel) {
        if (selectedFinal) {
          const combined = composeHangul(selectedConsonant, selectedVowel, selectedFinal);
          if (selectedFinal.finalIndex === 0) {
            subtitle.textContent = `å®Œæ•´éŸ³ç¯€:${combined} (ç„¡çµ‚è²)`;
          } else {
            subtitle.textContent = `å®Œæ•´éŸ³ç¯€:${combined} = ${selectedConsonant.symbol} + ${selectedVowel.symbol} + ${selectedFinal.symbol}`;
          }
        } else {
          subtitle.textContent = "é¸æ“‡çµ‚è²å®Œæˆä¸‰å±¤çµ„åˆ,æˆ–é¸ã€ŒÃ—ã€è¡¨ç¤ºç„¡çµ‚è²";
        }
      } else if (selectedConsonant) {
        subtitle.textContent = "è«‹å…ˆé¸æ“‡ä¸­è²æ¯éŸ³";
      } else {
        subtitle.textContent = "è«‹å…ˆé¸æ“‡åˆè²å’Œä¸­è²";
      }
    }

    // åˆå§‹æ¸²æŸ“
    renderConsonantGrid();
    updateConsonantSubtitle();
    renderVowelGrid();
    updateVowelSubtitle();
    renderFinalGrid();
    updateFinalSubtitle();

    // æ¸…é™¤å­éŸ³é–å®šæŒ‰éˆ•
    document.getElementById("clearConsonantBtn").addEventListener("click", () => {
      selectedConsonant = null;
      document.querySelectorAll("#consonantGrid .letter-card").forEach(c => {
        c.classList.remove("active");
      });
      updateConsonantSubtitle();
      updateVowelSubtitle();
      updateFinalSubtitle();
      showToast("å·²æ¸…é™¤å­éŸ³é–å®š");
    });

    // æ¸¬è©¦ Voice æŒ‰éˆ•
    document.getElementById("testVoiceBtn").addEventListener("click", () => {
      const seq = "ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬ì•„ìì°¨ì¹´íƒ€íŒŒí•˜";
      speakKorean(seq);
      showToast("æ’­æ”¾æ¸¬è©¦å¥:ê°€ë‚˜ë‹¤ë¼ë§ˆë°”ì‚¬ì•„ìì°¨ì¹´íƒ€íŒŒí•˜");
    });

    // æ¸…é™¤æ¯éŸ³é–å®šæŒ‰éˆ•
    document.getElementById("clearVowelBtn").addEventListener("click", () => {
      selectedVowel = null;
      document.querySelectorAll("#vowelGrid .letter-card").forEach(c => {
        c.classList.remove("active");
      });
      updateVowelSubtitle();
      updateFinalSubtitle();
      showToast("å·²æ¸…é™¤æ¯éŸ³é–å®š");
    });

    // æ¸…é™¤çµ‚è²é–å®šæŒ‰éˆ•
    document.getElementById("clearFinalBtn").addEventListener("click", () => {
      selectedFinal = null;
      document.querySelectorAll("#finalGrid .letter-card").forEach(c => {
        c.classList.remove("active");
      });
      updateVowelGrid();
      updateFinalSubtitle();
      showToast("å·²æ¸…é™¤çµ‚è²é–å®š");
    });

    // å…¨éƒ¨é‡ç½®æŒ‰éˆ•
    document.getElementById("clearAllBtn").addEventListener("click", () => {
      selectedConsonant = null;
      selectedVowel = null;
      selectedFinal = null;
      document.querySelectorAll(".letter-card").forEach(c => {
        c.classList.remove("active");
      });
      updateConsonantSubtitle();
      updateVowelSubtitle();
      updateFinalSubtitle();
      showToast("å·²é‡ç½®æ‰€æœ‰é¸æ“‡");
    });
  </script>
</body>
</html>
